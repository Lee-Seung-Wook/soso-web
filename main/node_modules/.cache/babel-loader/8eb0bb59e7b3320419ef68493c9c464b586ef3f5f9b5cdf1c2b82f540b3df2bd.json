{"ast":null,"code":"import React,{useEffect}from'react';import{useNavigate}from\"react-router-dom\";import{useDispatch}from'react-redux';import'./Redirect.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Redirect(){var navigater=useNavigate();var dispatch=useDispatch();var urlParams=new URL(window.location.href).searchParams;var name=urlParams.get('code');var urlParamsErro=new URL(window.location.href).searchParams;var nameErro=urlParamsErro.get('error_description');useEffect(function(){setTimeout(function(){fetch('userData.json').then(function(result){return result.json();}).then(function(json){dispatch({type:'CHANGE_USERNICKNAME',data:String(json.userNickName)});dispatch({type:'CHANGE_OPENDATE',data:Number(json.userOpenDate)});navigater('/main');});// if (nameErro === 'User denied access') {\n//     alert('로그인에 실패하였습니다.');\n//     navigater('/login');\n// };\n// const code = { code: name };\n// console.log(code);\n// const queryStringBody = Object.keys(code)\n//     .map(k => encodeURIComponent(k) + \"=\" + encodeURI(code[k]))\n//     .join(\"&\");\n// fetch(\"http://www.plater.kr/api/kakao\", {\n//     method: \"POST\",\n//     mode: 'cors',\n//     cache: 'no-cache',\n//     credentials: 'same-origin',\n//     headers: {\n//         'content-type': 'application/x-www-form-urlencoded;charset=utf-8'\n//     },\n//     body: queryStringBody\n// })\n//     .then(res => res.json())\n//     .then((data) => {\n//         dispatch({ type: 'CHANGE_USERID', data: data });\n//         console.log(data);\n//         navigater('/main');\n//     })\n//     .catch((error) => {\n//         console.log(error);\n//         alert('서버가 불안정 하여 로그인에 실패했습니다.');\n//         navigater('/login');\n//     });\n},2000);},[name,nameErro,navigater,dispatch]);return/*#__PURE__*/_jsxs(\"div\",{className:\"redirect_outContainer\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"redirect_img\",className:\"redirect_img\",src:\"https://cdn.dribbble.com/users/563824/screenshots/3633228/media/d876c7712d969c0656302b16b16af2cc.gif\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"redirect_h3\",children:\"\\uB85C\\uADF8\\uC778 \\uC911\\uC785\\uB2C8\\uB2E4\"})]});};export default Redirect;","map":{"version":3,"names":["React","useEffect","useNavigate","useDispatch","Redirect","navigater","dispatch","urlParams","URL","window","location","href","searchParams","name","get","urlParamsErro","nameErro","setTimeout","fetch","then","result","json","type","data","String","userNickName","Number","userOpenDate"],"sources":["C:/Users/blue_/Desktop/GitHub/soso-web/WebContent/web/main/src/components/Redirect.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from 'react-redux';\r\nimport './Redirect.css';\r\n\r\nfunction Redirect() {\r\n\r\n    const navigater = useNavigate();\r\n    const dispatch = useDispatch();\r\n    const urlParams = new URL(window.location.href).searchParams;\r\n    const name = urlParams.get('code');\r\n    const urlParamsErro = new URL(window.location.href).searchParams;\r\n    const nameErro = urlParamsErro.get('error_description');\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            fetch('userData.json')\r\n                .then((result) => {\r\n                    return result.json();\r\n                })\r\n                .then((json) => {\r\n                    dispatch({ type: 'CHANGE_USERNICKNAME', data: String(json.userNickName) });\r\n                    dispatch({ type: 'CHANGE_OPENDATE', data: Number(json.userOpenDate) });\r\n                    navigater('/main');\r\n                });\r\n            // if (nameErro === 'User denied access') {\r\n            //     alert('로그인에 실패하였습니다.');\r\n            //     navigater('/login');\r\n            // };\r\n            // const code = { code: name };\r\n            // console.log(code);\r\n            // const queryStringBody = Object.keys(code)\r\n            //     .map(k => encodeURIComponent(k) + \"=\" + encodeURI(code[k]))\r\n            //     .join(\"&\");\r\n            // fetch(\"http://www.plater.kr/api/kakao\", {\r\n            //     method: \"POST\",\r\n            //     mode: 'cors',\r\n            //     cache: 'no-cache',\r\n            //     credentials: 'same-origin',\r\n            //     headers: {\r\n            //         'content-type': 'application/x-www-form-urlencoded;charset=utf-8'\r\n            //     },\r\n            //     body: queryStringBody\r\n            // })\r\n            //     .then(res => res.json())\r\n            //     .then((data) => {\r\n            //         dispatch({ type: 'CHANGE_USERID', data: data });\r\n            //         console.log(data);\r\n            //         navigater('/main');\r\n            //     })\r\n            //     .catch((error) => {\r\n            //         console.log(error);\r\n            //         alert('서버가 불안정 하여 로그인에 실패했습니다.');\r\n            //         navigater('/login');\r\n            //     });\r\n        }, 2000);\r\n    }, [name, nameErro, navigater, dispatch]);\r\n\r\n    return (\r\n        <div className='redirect_outContainer'>\r\n            <img alt='redirect_img' className='redirect_img' src='https://cdn.dribbble.com/users/563824/screenshots/3633228/media/d876c7712d969c0656302b16b16af2cc.gif'></img>\r\n            <h3 className='redirect_h3'>로그인 중입니다</h3>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Redirect;"],"mappings":"AAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,gBAAgB,CAAC,wFAExB,QAASC,SAAQ,EAAG,CAEhB,GAAMC,UAAS,CAAGH,WAAW,EAAE,CAC/B,GAAMI,SAAQ,CAAGH,WAAW,EAAE,CAC9B,GAAMI,UAAS,CAAG,GAAIC,IAAG,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC,CAACC,YAAY,CAC5D,GAAMC,KAAI,CAAGN,SAAS,CAACO,GAAG,CAAC,MAAM,CAAC,CAClC,GAAMC,cAAa,CAAG,GAAIP,IAAG,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC,CAACC,YAAY,CAChE,GAAMI,SAAQ,CAAGD,aAAa,CAACD,GAAG,CAAC,mBAAmB,CAAC,CAEvDb,SAAS,CAAC,UAAM,CACZgB,UAAU,CAAC,UAAM,CACbC,KAAK,CAAC,eAAe,CAAC,CACjBC,IAAI,CAAC,SAACC,MAAM,CAAK,CACd,MAAOA,OAAM,CAACC,IAAI,EAAE,CACxB,CAAC,CAAC,CACDF,IAAI,CAAC,SAACE,IAAI,CAAK,CACZf,QAAQ,CAAC,CAAEgB,IAAI,CAAE,qBAAqB,CAAEC,IAAI,CAAEC,MAAM,CAACH,IAAI,CAACI,YAAY,CAAE,CAAC,CAAC,CAC1EnB,QAAQ,CAAC,CAAEgB,IAAI,CAAE,iBAAiB,CAAEC,IAAI,CAAEG,MAAM,CAACL,IAAI,CAACM,YAAY,CAAE,CAAC,CAAC,CACtEtB,SAAS,CAAC,OAAO,CAAC,CACtB,CAAC,CAAC,CACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACJ,CAAC,CAAE,IAAI,CAAC,CACZ,CAAC,CAAE,CAACQ,IAAI,CAAEG,QAAQ,CAAEX,SAAS,CAAEC,QAAQ,CAAC,CAAC,CAEzC,mBACI,aAAK,SAAS,CAAC,uBAAuB,wBAClC,YAAK,GAAG,CAAC,cAAc,CAAC,SAAS,CAAC,cAAc,CAAC,GAAG,CAAC,sGAAsG,EAAO,cAClK,WAAI,SAAS,CAAC,aAAa,yDAAc,GACvC,CAEd,CAAC,CAED,cAAeF,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}