<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button onclick="checkLetterData()">Create letterData</button>
    <button onclick="firstCheck()">Check letterData </button>

</body>

<script>
    const letterData = [];

    function checkLetterData() {
        fetch('https://plater.kr/api/letter/userid/kD8yXnOdq9MSJSM2BHLOHa7rsbewMSJSM3DMSJSM3D', {
            method: 'GET',
            mode: 'cors',
            cache: 'no-cache',
            credentials: 'same-origin',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(res => res.json())
            .then((data) => {
                letterData.push(...data);
                for (let i = 0; i < letterData.length; i++) {
                    fetch('https://plater.kr/api/sticker/letterid/' + letterData[i].letterId, {
                        method: 'GET',
                        mode: 'cors',
                        cache: 'no-cache',
                        credentials: 'same-origin',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    })
                        .then(res => res.json())
                        .then((data) => {
                            sticker = Object.assign({}, data)
                            Object.assign(letterData[i], { sticker });
                        })
                        .catch((error) => {
                            console.log(error);
                        });
                };
            })
            .catch((error) => {
                console.log(error);
            });
    };

    function firstCheck() {
        let newLetterData = [...letterData];
        for (let i = 0; i < newLetterData.length; i++) {
            console.log(newLetterData[i]);
        };
    };
</script>

</html>